$(function(){if(document.documentElement&&document.documentElement.currentStyle&&document.documentElement.runtimeStyle){var t=function(t){var e=$(t),i=e.height(),n=t.currentStyle.width;if(/^[\d.]+(px)?$/i.test(n))n=parseInt(n,10);else if(/^\d/.test(n)){var o=t.style.left,r=t.runtimeStyle.left;t.runtimeStyle.left=t.currentStyle.left,t.style.left=n||0,n=t.style.pixelLeft,t.style.left=o,t.runtimeStyle.left=r}if(n&&i){var s=i/n,a=e.css("max-width"),l=Math.round(parseFloat(a)*s)+a.match(/[\d.]+([^\d.]*)$/)[1];e.css("max-height",l),/[\d.]+%/.test(t.currentStyle.maxWidth)&&e.resize(function(){a=e.css("max-width"),l=Math.round(parseFloat(a)*s)+a.match(/[\d.]+([^\d.]*)$/)[1],e.css("max-height",l)})}};$("img").filter(function(){var t="auto"!==this.currentStyle.width&&"inherit"!==this.currentStyle.width&&"auto"===this.currentStyle.height&&"none"!==this.currentStyle.maxWidth&&"none"===this.currentStyle.maxHeight;return t}).each(function(){$(this).load(function(){t(this)}),this.complete&&t(this)})}});